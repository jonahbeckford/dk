/*
=============================================
Steps
=============================================

1. [CommonsBase_Std.S7z.Assets] Obtain 7zr.exe that only works on Windows.
   See "Binary assets" in [CommonsBase_Std.S7z.Assets].
   Test with: `get-object 'CommonsBase_Std.S7z.Assets@25.1.0' -s File.Windows_x86_64 -d target/s7zr`
2. [CommonsBase_Std.S7z.Windows7zExe] Use 7zr.exe to extract the Window-specific binaries from the installers.
   Test with: `get-object 'CommonsBase_Std.S7z.Windows7zExe@25.1.0' -s File.Windows_x86_64 -d target/win7z`
3. [CommonsBase_Std.S7z.MacLinux7zTar] Use 7zr.exe to extract the Mac and Linux-specific tar files from the installers.
   Test with: `get-object 'CommonsBase_Std.S7z.MacLinux7zTar@25.1.0' -s File.Darwin_arm64 -d target/mactar`
4. [CommonsBase_Std.S7z.MacLinux7zExe] Use Windows 7z.exe to extract the Mac and Linux-specific binaries from the tar files.
   Test with: `get-object 'CommonsBase_Std.S7z.MacLinux7zExe@25.1.0' -s File.Darwin_arm64 -d target/macexe`
5. [CommonsBase_Std.S7z] Rename all extracted executables to '7zz.exe' for consistency.
   Test with: `get-object 'CommonsBase_Std.S7z@25.1.0' -s File.Darwin_arm64 -d target/s7zexe`

All assets are stored in [CommonsBase_Std.S7z.Assets], which is defined in [CommonsBase_Std.S7z.Assets].

*/
{
  "$schema": "https://github.com/diskuv/dk/raw/refs/heads/V2_4/etc/jsonschema/mlfront-values.json",
  "schema_version": {
    "major": 1,
    "minor": 0
  },
  "forms": [
    {
      "id": "CommonsBase_Std.S7z@25.1.0",
      "precommands": {
        "private": [
          // Interface: 7zz.exe, LICENSE
          // - '7zz.exe' so that end-users don't have to have complicated logic based on the platform
          // - 'LICENSE' as the dk conventional filename for the main license file

          // Windows. 7z.exe -> 7zz.exe
          "get-object CommonsBase_Std.S7z.Windows7zExe@25.1.0 -s File.Windows_arm -m ./7z.exe -f ${SLOT.File.Windows_arm}/7zz.exe",
          "get-object CommonsBase_Std.S7z.Windows7zExe@25.1.0 -s File.Windows_arm64 -m ./7z.exe -f ${SLOT.File.Windows_arm64}/7zz.exe",
          "get-object CommonsBase_Std.S7z.Windows7zExe@25.1.0 -s File.Windows_x86 -m ./7z.exe -f ${SLOT.File.Windows_x86}/7zz.exe",
          "get-object CommonsBase_Std.S7z.Windows7zExe@25.1.0 -s File.Windows_x86_64 -m ./7z.exe -f ${SLOT.File.Windows_x86_64}/7zz.exe",

          // Unix. 7zz -> 7zz.exe
          "get-object CommonsBase_Std.S7z.MacLinux7zExe@25.1.0 -s File.Darwin_arm64 -m ./7zz -f ${SLOT.File.Darwin_arm64}/7zz.exe",
          "get-object CommonsBase_Std.S7z.MacLinux7zExe@25.1.0 -s File.Darwin_x86_64 -m ./7zz -f ${SLOT.File.Darwin_x86_64}/7zz.exe",
          "get-object CommonsBase_Std.S7z.MacLinux7zExe@25.1.0 -s File.Linux_arm -m ./7zz -f ${SLOT.File.Linux_arm}/7zz.exe",
          "get-object CommonsBase_Std.S7z.MacLinux7zExe@25.1.0 -s File.Linux_arm64 -m ./7zz -f ${SLOT.File.Linux_arm64}/7zz.exe",
          "get-object CommonsBase_Std.S7z.MacLinux7zExe@25.1.0 -s File.Linux_x86 -m ./7zz -f ${SLOT.File.Linux_x86}/7zz.exe",
          "get-object CommonsBase_Std.S7z.MacLinux7zExe@25.1.0 -s File.Linux_x86_64 -m ./7zz -f ${SLOT.File.Linux_x86_64}/7zz.exe",

          // Windows and Unix. License.txt -> LICENSE
          "get-object CommonsBase_Std.S7z.Windows7zExe@25.1.0 -s File.Windows_x86 -m ./License.txt -f ${SLOT.File.Windows_arm}/LICENSE",
          "get-object CommonsBase_Std.S7z.Windows7zExe@25.1.0 -s File.Windows_x86 -m ./License.txt -f ${SLOT.File.Windows_arm64}/LICENSE",
          "get-object CommonsBase_Std.S7z.Windows7zExe@25.1.0 -s File.Windows_x86 -m ./License.txt -f ${SLOT.File.Windows_x86}/LICENSE",
          "get-object CommonsBase_Std.S7z.Windows7zExe@25.1.0 -s File.Windows_x86 -m ./License.txt -f ${SLOT.File.Windows_x86_64}/LICENSE",
          "get-object CommonsBase_Std.S7z.MacLinux7zExe@25.1.0 -s File.Darwin_arm64 -m ./License.txt -f ${SLOT.File.Darwin_arm64}/LICENSE",
          "get-object CommonsBase_Std.S7z.MacLinux7zExe@25.1.0 -s File.Darwin_arm64 -m ./License.txt -f ${SLOT.File.Darwin_x86_64}/LICENSE",
          "get-object CommonsBase_Std.S7z.MacLinux7zExe@25.1.0 -s File.Darwin_arm64 -m ./License.txt -f ${SLOT.File.Linux_arm}/LICENSE",
          "get-object CommonsBase_Std.S7z.MacLinux7zExe@25.1.0 -s File.Darwin_arm64 -m ./License.txt -f ${SLOT.File.Linux_arm64}/LICENSE",
          "get-object CommonsBase_Std.S7z.MacLinux7zExe@25.1.0 -s File.Darwin_arm64 -m ./License.txt -f ${SLOT.File.Linux_x86}/LICENSE",
          "get-object CommonsBase_Std.S7z.MacLinux7zExe@25.1.0 -s File.Darwin_arm64 -m ./License.txt -f ${SLOT.File.Linux_x86_64}/LICENSE"
        ]
      },
      "outputs": {
        "files": [
          {
            "paths": ["7zz.exe", "LICENSE"],
            "slots": [
              "File.Windows_arm",
              "File.Windows_arm64",
              "File.Windows_x86",
              "File.Windows_x86_64",
              "File.Darwin_arm64",
              "File.Darwin_x86_64",
              "File.Linux_arm",
              "File.Linux_arm64",
              "File.Linux_x86",
              "File.Linux_x86_64"
            ]
          }
        ]
      }
    }
  ]
}
